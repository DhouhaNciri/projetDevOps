{"ast":null,"code":"import { __decorate } from \"tslib\";\n// Updated component.ts file\nimport { Component } from '@angular/core';\nimport Swal from 'sweetalert2';\nimport { AddHousingComponent } from '../add-housing/add-housing.component';\nimport { DetailsComponent } from './details/details.component';\nimport { EditPublicationComponent } from './edit-publication/edit-publication.component';\nexport let PublicationComponent = class PublicationComponent {\n  constructor(dialog, HousingService, router) {\n    this.dialog = dialog;\n    this.HousingService = HousingService;\n    this.router = router;\n    this.tenantConnect = localStorage.getItem('tenant');\n    this.ownerConnect = localStorage.getItem('owner');\n    this.adminConnect = localStorage.getItem('admin');\n    this.email = localStorage.getItem('email');\n    this.housings = [];\n    this.filteredHousings = [];\n    // Filter variables\n    this.searchQuery = '';\n    this.filterPrice = null;\n    this.filterAvailableRooms = null;\n    this.filterAddress = '';\n    this.filterCharacteristics = ''; // New filter variable\n  }\n\n  ngOnInit() {\n    this.getAllHousing();\n  }\n  getAllHousing() {\n    this.HousingService.getAllHousing().subscribe(res => {\n      console.log(res);\n      this.housings = res;\n      this.filteredHousings = res;\n    });\n  }\n  // Apply filters\n  applyFilters() {\n    this.filteredHousings = this.housings.filter(housing => {\n      const matchesPrice = this.filterPrice ? housing.price <= this.filterPrice : true;\n      const matchesRooms = this.filterAvailableRooms ? housing.availableRooms >= this.filterAvailableRooms : true;\n      const matchesAddress = this.filterAddress ? housing.address.toLowerCase().includes(this.filterAddress.toLowerCase()) : true;\n      const matchesSearch = housing.description.toLowerCase().includes(this.searchQuery.toLowerCase()) || housing.address.toLowerCase().includes(this.searchQuery.toLowerCase());\n      const matchesCharacteristics = this.filterCharacteristics ? housing.characteristics.toLowerCase().includes(this.filterCharacteristics.toLowerCase()) : true;\n      return matchesPrice && matchesRooms && matchesAddress && matchesSearch && matchesCharacteristics;\n    });\n  }\n  onFilterChange() {\n    this.applyFilters();\n  }\n  openDialog() {\n    const dialogRef = this.dialog.open(AddHousingComponent);\n    dialogRef.afterClosed().subscribe(() => {\n      this.getAllHousing();\n    });\n  }\n  show(data) {\n    const dialogRef = this.dialog.open(DetailsComponent, {\n      data\n    });\n    dialogRef.afterClosed().subscribe(() => {\n      this.getAllHousing();\n    });\n  }\n  edit(data) {\n    const dialogRef = this.dialog.open(EditPublicationComponent, {\n      data\n    });\n    dialogRef.afterClosed().subscribe(() => {\n      this.getAllHousing();\n    });\n  }\n  delete(id) {\n    Swal.fire({\n      title: \"Are you sure?\",\n      text: \"You won't be able to revert this!\",\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#3085d6\",\n      cancelButtonColor: \"#d33\",\n      confirmButtonText: \"Yes, delete it!\"\n    }).then(result => {\n      if (result.isConfirmed) {\n        this.HousingService.deleteHousing(id).subscribe(() => {\n          Swal.fire({\n            title: \"Deleted!\",\n            text: \"Your housing listing has been deleted.\",\n            icon: \"success\"\n          }).then(() => {\n            this.getAllHousing();\n          });\n        });\n      }\n    });\n  }\n  openMessaging(housing) {\n    // Navigate to the chat page, passing the housing information or the necessary parameters as needed\n    this.router.navigate(['/chat'], {\n      queryParams: {\n        userId: housing.createdBy.id\n      }\n    });\n  }\n};\nPublicationComponent = __decorate([Component({\n  selector: 'app-publication',\n  templateUrl: './publication.component.html',\n  styleUrls: ['./publication.component.scss']\n})], PublicationComponent);","map":{"version":3,"names":["Component","Swal","AddHousingComponent","DetailsComponent","EditPublicationComponent","PublicationComponent","constructor","dialog","HousingService","router","tenantConnect","localStorage","getItem","ownerConnect","adminConnect","email","housings","filteredHousings","searchQuery","filterPrice","filterAvailableRooms","filterAddress","filterCharacteristics","ngOnInit","getAllHousing","subscribe","res","console","log","applyFilters","filter","housing","matchesPrice","price","matchesRooms","availableRooms","matchesAddress","address","toLowerCase","includes","matchesSearch","description","matchesCharacteristics","characteristics","onFilterChange","openDialog","dialogRef","open","afterClosed","show","data","edit","delete","id","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","isConfirmed","deleteHousing","openMessaging","navigate","queryParams","userId","createdBy","__decorate","selector","templateUrl","styleUrls"],"sources":["G:\\Bureau\\Bureau\\Projet Web\\Frontend\\angular\\src\\app\\publication\\publication.component.ts"],"sourcesContent":["// Updated component.ts file\nimport { Component, OnInit } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { HousingService } from '../services/housing.service'; \nimport Swal from 'sweetalert2';\nimport { AddHousingComponent } from '../add-housing/add-housing.component';\nimport { DetailsComponent } from './details/details.component';\nimport { EditPublicationComponent } from './edit-publication/edit-publication.component';\nimport { Router } from '@angular/router';\n@Component({\n  selector: 'app-publication',\n  templateUrl: './publication.component.html',\n  styleUrls: ['./publication.component.scss']\n})\nexport class PublicationComponent implements OnInit {\n\n  \n\n  tenantConnect = localStorage.getItem('tenant');\n  ownerConnect = localStorage.getItem('owner');\n  adminConnect = localStorage.getItem('admin');\n  email = localStorage.getItem('email');\n  housings: any[] = [];\n  filteredHousings: any[] = [];\n\n  // Filter variables\n  searchQuery: string = '';\n  filterPrice: number | null = null;\n  filterAvailableRooms: number | null = null;\n  filterAddress: string = '';\n  filterCharacteristics: string = ''; // New filter variable\n\n  constructor(\n\n    \n    public dialog: MatDialog,\n    private HousingService: HousingService,private router: Router\n\n  ) {}\n\n  ngOnInit(): void {\n    this.getAllHousing();\n  }\n\n  getAllHousing() {\n    this.HousingService.getAllHousing().subscribe(res => {\n      console.log(res);\n      this.housings = res;\n      this.filteredHousings = res;\n    });\n  }\n\n  // Apply filters\n  applyFilters() {\n    this.filteredHousings = this.housings.filter(housing => {\n      const matchesPrice = this.filterPrice ? housing.price <= this.filterPrice : true;\n      const matchesRooms = this.filterAvailableRooms ? housing.availableRooms >= this.filterAvailableRooms : true;\n      const matchesAddress = this.filterAddress ? housing.address.toLowerCase().includes(this.filterAddress.toLowerCase()) : true;\n      const matchesSearch = housing.description.toLowerCase().includes(this.searchQuery.toLowerCase()) || housing.address.toLowerCase().includes(this.searchQuery.toLowerCase());\n      const matchesCharacteristics = this.filterCharacteristics ? \n        housing.characteristics.toLowerCase().includes(this.filterCharacteristics.toLowerCase()) : true;\n\n      return matchesPrice && matchesRooms && matchesAddress && matchesSearch && matchesCharacteristics;\n    });\n  }\n\n  onFilterChange() {\n    this.applyFilters();\n  }\n\n  openDialog(): void {\n    const dialogRef = this.dialog.open(AddHousingComponent);\n\n    dialogRef.afterClosed().subscribe(() => {\n      this.getAllHousing();\n    });\n  }\n\n  show(data: any) {\n    const dialogRef = this.dialog.open(DetailsComponent, { data });\n\n    dialogRef.afterClosed().subscribe(() => {\n      this.getAllHousing();\n    });\n  }\n\n  edit(data: any) {\n    const dialogRef = this.dialog.open(EditPublicationComponent, { data });\n\n    dialogRef.afterClosed().subscribe(() => {\n      this.getAllHousing();\n    });\n  }\n\n  delete(id: any) {\n    Swal.fire({\n      title: \"Are you sure?\",\n      text: \"You won't be able to revert this!\",\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#3085d6\",\n      cancelButtonColor: \"#d33\",\n      confirmButtonText: \"Yes, delete it!\"\n    }).then((result) => {\n      if (result.isConfirmed) {\n        this.HousingService.deleteHousing(id).subscribe(() => {\n          Swal.fire({\n            title: \"Deleted!\",\n            text: \"Your housing listing has been deleted.\",\n            icon: \"success\"\n          }).then(() => {\n            this.getAllHousing();\n          });\n        });\n      }\n    });\n  }\n\n  openMessaging(housing: any): void {\n    // Navigate to the chat page, passing the housing information or the necessary parameters as needed\n    this.router.navigate(['/chat'], { queryParams: { userId: housing.createdBy.id } });\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}