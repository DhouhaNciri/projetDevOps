{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/messaging.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction MessagesComponent_div_3_button_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function MessagesComponent_div_3_button_9_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const message_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.markAsRead(message_r1.id));\n    });\n    i0.ɵɵtext(1, \"Mark as Read\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MessagesComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\")(2, \"strong\");\n    i0.ɵɵtext(3, \"From:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"small\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, MessagesComponent_div_3_button_9_Template, 2, 0, \"button\", 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const message_r1 = ctx.$implicit;\n    i0.ɵɵclassProp(\"unread\", !message_r1.isRead);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", message_r1.senderId, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(message_r1.content);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(message_r1.timestamp);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !message_r1.isRead);\n  }\n}\nexport class MessagesComponent {\n  constructor(messagingService) {\n    this.messagingService = messagingService;\n    this.messages = [];\n    this.newMessageContent = '';\n    this.senderId = 1; // Replace with logged-in user's ID\n    this.receiverId = 2; // Replace with selected receiver's ID\n  }\n\n  ngOnInit() {\n    this.fetchMessages();\n  }\n  fetchMessages() {\n    this.messagingService.getMessages(this.senderId).subscribe(data => {\n      this.messages = data;\n    });\n  }\n  sendMessage() {\n    if (this.newMessageContent.trim()) {\n      this.messagingService.sendMessage(this.senderId, this.receiverId, this.newMessageContent).subscribe(() => {\n        this.newMessageContent = '';\n        this.fetchMessages();\n      });\n    }\n  }\n  markAsRead(messageId) {\n    this.messagingService.markAsRead(messageId).subscribe(() => {\n      this.fetchMessages();\n    });\n  }\n  static #_ = this.ɵfac = function MessagesComponent_Factory(t) {\n    return new (t || MessagesComponent)(i0.ɵɵdirectiveInject(i1.MessagingService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MessagesComponent,\n    selectors: [[\"app-messages\"]],\n    decls: 9,\n    vars: 2,\n    consts: [[1, \"messages-container\"], [3, \"unread\", 4, \"ngFor\", \"ngForOf\"], [\"placeholder\", \"Write your message here\", 3, \"ngModel\", \"ngModelChange\"], [3, \"click\"], [3, \"click\", 4, \"ngIf\"]],\n    template: function MessagesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n        i0.ɵɵtext(2, \"Inbox\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, MessagesComponent_div_3_Template, 10, 6, \"div\", 1);\n        i0.ɵɵelementStart(4, \"h2\");\n        i0.ɵɵtext(5, \"Send a Message\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"textarea\", 2);\n        i0.ɵɵlistener(\"ngModelChange\", function MessagesComponent_Template_textarea_ngModelChange_6_listener($event) {\n          return ctx.newMessageContent = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"button\", 3);\n        i0.ɵɵlistener(\"click\", function MessagesComponent_Template_button_click_7_listener() {\n          return ctx.sendMessage();\n        });\n        i0.ɵɵtext(8, \"Send\");\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.messages);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.newMessageContent);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n    styles: [\".messages-container[_ngcontent-%COMP%] {\\n  max-width: 600px;\\n  margin: auto;\\n}\\n\\n.unread[_ngcontent-%COMP%] {\\n  font-weight: bold;\\n}\\n\\ntextarea[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 100px;\\n  margin-top: 10px;\\n}\\n\\nbutton[_ngcontent-%COMP%] {\\n  margin-top: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9tZXNzYWdlcy9tZXNzYWdlcy5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uLy4uLy4uLy4uL1Byb2pldCUyMFdlYi9Gcm9udGVuZC9hbmd1bGFyL3NyYy9hcHAvY29tcG9uZW50cy9tZXNzYWdlcy9tZXNzYWdlcy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGdCQUFBO0VBQ0EsWUFBQTtBQ0NKOztBREVFO0VBQ0UsaUJBQUE7QUNDSjs7QURDRTtFQUNFLFdBQUE7RUFDQSxhQUFBO0VBQ0EsZ0JBQUE7QUNFSjs7QURBRTtFQUNFLGdCQUFBO0FDR0oiLCJzb3VyY2VzQ29udGVudCI6WyIubWVzc2FnZXMtY29udGFpbmVyIHtcbiAgICBtYXgtd2lkdGg6IDYwMHB4O1xuICAgIG1hcmdpbjogYXV0bztcbiAgfVxuICBcbiAgLnVucmVhZCB7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIH1cbiAgdGV4dGFyZWEge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwcHg7XG4gICAgbWFyZ2luLXRvcDogMTBweDtcbiAgfVxuICBidXR0b24ge1xuICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gIH1cbiAgIiwiLm1lc3NhZ2VzLWNvbnRhaW5lciB7XG4gIG1heC13aWR0aDogNjAwcHg7XG4gIG1hcmdpbjogYXV0bztcbn1cblxuLnVucmVhZCB7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xufVxuXG50ZXh0YXJlYSB7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMHB4O1xuICBtYXJnaW4tdG9wOiAxMHB4O1xufVxuXG5idXR0b24ge1xuICBtYXJnaW4tdG9wOiAxMHB4O1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵlistener","MessagesComponent_div_3_button_9_Template_button_click_0_listener","ɵɵrestoreView","_r5","message_r1","ɵɵnextContext","$implicit","ctx_r3","ɵɵresetView","markAsRead","id","ɵɵtext","ɵɵelementEnd","ɵɵtemplate","MessagesComponent_div_3_button_9_Template","ɵɵclassProp","isRead","ɵɵadvance","ɵɵtextInterpolate1","senderId","ɵɵtextInterpolate","content","timestamp","ɵɵproperty","MessagesComponent","constructor","messagingService","messages","newMessageContent","receiverId","ngOnInit","fetchMessages","getMessages","subscribe","data","sendMessage","trim","messageId","_","ɵɵdirectiveInject","i1","MessagingService","_2","selectors","decls","vars","consts","template","MessagesComponent_Template","rf","ctx","MessagesComponent_div_3_Template","MessagesComponent_Template_textarea_ngModelChange_6_listener","$event","MessagesComponent_Template_button_click_7_listener"],"sources":["G:\\Bureau\\Bureau\\Projet Web\\Frontend\\angular\\src\\app\\components\\messages\\messages.component.ts","G:\\Bureau\\Bureau\\Projet Web\\Frontend\\angular\\src\\app\\components\\messages\\messages.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { MessagingService } from '../../services/messaging.service';\nimport { Message } from './message';\n\n@Component({\n  selector: 'app-messages',\n  templateUrl: './messages.component.html',\n  styleUrls: ['./messages.component.scss'],\n})\nexport class MessagesComponent implements OnInit {\n  messages: Message[] = [];\n  newMessageContent: string = '';\n  senderId = 1; // Replace with logged-in user's ID\n  receiverId = 2; // Replace with selected receiver's ID\n\n  constructor(private messagingService: MessagingService) {}\n\n  ngOnInit(): void {\n    this.fetchMessages();\n  }\n\n  fetchMessages(): void {\n    this.messagingService.getMessages(this.senderId).subscribe((data) => {\n      this.messages = data;\n    });\n  }\n\n  sendMessage(): void {\n    if (this.newMessageContent.trim()) {\n      this.messagingService\n        .sendMessage(this.senderId, this.receiverId, this.newMessageContent)\n        .subscribe(() => {\n          this.newMessageContent = '';\n          this.fetchMessages();\n        });\n    }\n  }\n\n  markAsRead(messageId: number): void {\n    this.messagingService.markAsRead(messageId).subscribe(() => {\n      this.fetchMessages();\n    });\n  }\n}\n","<div class=\"messages-container\">\n    <h2>Inbox</h2>\n    <div *ngFor=\"let message of messages\" [class.unread]=\"!message.isRead\">\n      <p><strong>From:</strong> {{ message.senderId }}</p>\n      <p>{{ message.content }}</p>\n      <small>{{ message.timestamp }}</small>\n      <button *ngIf=\"!message.isRead\" (click)=\"markAsRead(message.id)\">Mark as Read</button>\n    </div>\n  \n    <h2>Send a Message</h2>\n    <textarea [(ngModel)]=\"newMessageContent\" placeholder=\"Write your message here\"></textarea>\n    <button (click)=\"sendMessage()\">Send</button>\n  </div>\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}